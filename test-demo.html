<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Queens Solver - Test & Demo</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
          sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 40px 20px;
        color: white;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
      }

      h1 {
        text-align: center;
        margin-bottom: 10px;
        font-size: 36px;
      }

      .subtitle {
        text-align: center;
        margin-bottom: 40px;
        opacity: 0.9;
        font-size: 18px;
      }

      .controls {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 16px;
        padding: 24px;
        margin-bottom: 30px;
      }

      .size-selector {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        flex-wrap: wrap;
      }

      .size-btn {
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid transparent;
        color: white;
        padding: 12px 24px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .size-btn:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.05);
      }

      .size-btn.active {
        background: white;
        color: #667eea;
        border-color: white;
      }

      .action-buttons {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .btn {
        flex: 1;
        min-width: 150px;
        background: white;
        color: #667eea;
        border: none;
        padding: 14px 24px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        font-size: 16px;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      .btn-primary {
        background: #4caf50;
        color: white;
      }

      .btn-secondary {
        background: #2196f3;
        color: white;
      }

      .btn-danger {
        background: #f44336;
        color: white;
      }

      .board-container {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 16px;
        padding: 24px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .board {
        display: grid;
        gap: 4px;
        background: rgba(0, 0, 0, 0.3);
        padding: 4px;
        border-radius: 12px;
        margin-bottom: 20px;
      }

      .cell {
        aspect-ratio: 1;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 6px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 32px;
        transition: all 0.2s ease;
        position: relative;
        user-select: none;
      }

      .cell:hover {
        background: rgba(255, 255, 255, 1);
        transform: scale(1.05);
      }

      .cell.blocked {
        background: rgba(255, 100, 100, 0.3);
        cursor: not-allowed;
      }

      .cell.blocked::after {
        content: 'âœ•';
        color: rgba(255, 0, 0, 0.5);
        font-size: 24px;
      }

      .cell.queen {
        background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
      }

      .cell.solution {
        background: rgba(76, 175, 80, 0.5);
        border: 3px solid #4caf50;
        animation: pulse 1.5s ease-in-out infinite;
      }

      .cell.solution::before {
        content: attr(data-step);
        position: absolute;
        top: 4px;
        right: 4px;
        background: #4caf50;
        color: white;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        font-weight: bold;
      }

      .cell.solution-existing {
        background: rgba(255, 215, 0, 0.5);
        border: 3px solid #ffd700;
        animation: pulse 1.5s ease-in-out infinite;
      }

      .cell.solution-existing::before {
        content: attr(data-step);
        position: absolute;
        top: 4px;
        right: 4px;
        background: #ffd700;
        color: #333;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
        font-weight: bold;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 0.6;
        }
        50% {
          opacity: 1;
        }
      }

      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 16px;
        margin-top: 20px;
      }

      .stat-card {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 12px;
        padding: 16px;
        text-align: center;
      }

      .stat-label {
        font-size: 14px;
        opacity: 0.8;
        margin-bottom: 8px;
      }

      .stat-value {
        font-size: 28px;
        font-weight: bold;
      }

      .message {
        text-align: center;
        padding: 16px;
        border-radius: 8px;
        margin-top: 20px;
        font-weight: 600;
        animation: slideDown 0.3s ease-out;
      }

      .message.success {
        background: rgba(76, 175, 80, 0.3);
      }

      .message.error {
        background: rgba(244, 67, 54, 0.3);
      }

      .message.info {
        background: rgba(33, 150, 243, 0.3);
      }

      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .instructions {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 16px;
        padding: 24px;
        margin-top: 30px;
      }

      .instructions h2 {
        margin-bottom: 16px;
      }

      .instructions ul {
        list-style: none;
        padding: 0;
      }

      .instructions li {
        padding: 8px 0;
        padding-left: 24px;
        position: relative;
      }

      .instructions li::before {
        content: 'âœ“';
        position: absolute;
        left: 0;
        color: #4caf50;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ðŸ‘‘ Queens Solver</h1>
      <p class="subtitle">Test & Demo - N-Queens Problem Solver</p>

      <div class="controls">
        <h3 style="margin-bottom: 16px">Tahta Boyutu SeÃ§:</h3>
        <div class="size-selector">
          <button class="size-btn" data-size="4">4x4</button>
          <button class="size-btn" data-size="5">5x5</button>
          <button class="size-btn" data-size="6">6x6</button>
          <button class="size-btn active" data-size="7">7x7 (LinkedIn)</button>
          <button class="size-btn" data-size="8">8x8</button>
          <button class="size-btn" data-size="9">9x9</button>
          <button class="size-btn" data-size="10">10x10</button>
        </div>

        <div class="action-buttons">
          <button class="btn btn-primary" id="solve-btn">
            ðŸ¤– Ã‡Ã¶z
          </button>
          <button class="btn btn-secondary" id="step-btn">
            ðŸ‘£ AdÄ±m AdÄ±m
          </button>
          <button class="btn" id="random-btn">ðŸŽ² Rastgele Engel</button>
          <button class="btn btn-danger" id="reset-btn">ðŸ”„ SÄ±fÄ±rla</button>
        </div>
      </div>

      <div class="board-container">
        <div id="board" class="board"></div>

        <div id="message"></div>

        <div class="stats">
          <div class="stat-card">
            <div class="stat-label">Tahta Boyutu</div>
            <div class="stat-value" id="stat-size">7x7</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Vezir SayÄ±sÄ±</div>
            <div class="stat-value" id="stat-queens">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Engel SayÄ±sÄ±</div>
            <div class="stat-value" id="stat-blocked">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Ã‡Ã¶zÃ¼m SÃ¼resi</div>
            <div class="stat-value" id="stat-time">-</div>
          </div>
        </div>
      </div>

      <div class="instructions">
        <h2>ðŸ“– NasÄ±l KullanÄ±lÄ±r?</h2>
        <ul>
          <li>Tahta boyutunu seÃ§in (4x4'ten 10x10'a kadar)</li>
          <li>HÃ¼crelere tÄ±klayarak vezir yerleÅŸtirin veya engel koyun</li>
          <li>"Ã‡Ã¶z" butonuna tÄ±klayarak otomatik Ã§Ã¶zÃ¼m gÃ¶rÃ¼n</li>
          <li>"AdÄ±m AdÄ±m" ile Ã§Ã¶zÃ¼mÃ¼ yavaÅŸÃ§a izleyin</li>
          <li>"Rastgele Engel" ile random test senaryolarÄ± oluÅŸturun</li>
        </ul>

        <h2 style="margin-top: 24px">ðŸŽ¯ Queens Problemi Nedir?</h2>
        <p style="margin-top: 12px; line-height: 1.6">
          N-Queens problemi, NxN boyutundaki bir satranÃ§ tahtasÄ±na N adet vezir
          yerleÅŸtirme problemidir. HiÃ§bir vezir diÄŸer bir veziri tehdit
          etmemelidir (aynÄ± satÄ±r, sÃ¼tun veya Ã§aprazda olmamalÄ±dÄ±r).
        </p>
      </div>
    </div>

    <script src="solver.js"></script>
    <script>
      class QueensDemo {
        constructor() {
          this.size = 7;
          this.board = [];
          this.blockedCells = new Set();
          this.queens = new Set();
          this.solution = null;
          this.stepIndex = 0;
          this.stepInterval = null;

          this.init();
        }

        init() {
          this.createBoard();
          this.attachEventListeners();
          this.updateStats();
        }

        createBoard() {
          const boardEl = document.getElementById('board');
          boardEl.innerHTML = '';
          boardEl.style.gridTemplateColumns = `repeat(${this.size}, 1fr)`;

          // Calculate cell size based on board size
          const maxSize = Math.min(600, window.innerWidth - 100);
          const cellSize = Math.floor(maxSize / this.size);
          boardEl.style.width = `${cellSize * this.size + (this.size + 1) * 4}px`;

          this.board = [];

          for (let i = 0; i < this.size * this.size; i++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.dataset.index = i;

            cell.addEventListener('click', () => this.handleCellClick(i));

            boardEl.appendChild(cell);
            this.board.push(cell);
          }
        }

        handleCellClick(index) {
          const cell = this.board[index];
          const key = `${Math.floor(index / this.size)},${index % this.size}`;

          if (this.queens.has(key)) {
            // Remove queen
            this.queens.delete(key);
            cell.classList.remove('queen');
            cell.textContent = '';
          } else if (this.blockedCells.has(key)) {
            // Remove block
            this.blockedCells.delete(key);
            cell.classList.remove('blocked');
          } else if (this.queens.size < this.size) {
            // Add queen
            this.queens.add(key);
            cell.classList.add('queen');
            cell.textContent = 'â™›';
          } else {
            // Add block
            this.blockedCells.add(key);
            cell.classList.add('blocked');
          }

          this.updateStats();
          this.clearSolution();
        }

        solve() {
          this.clearSolution();

          const startTime = performance.now();

          // Merge queens and blocked cells
          const allBlocked = new Set([
            ...this.blockedCells,
            ...this.queens,
          ]);

          const solver = new QueensSolver(this.size);
          this.solution = solver.solve(allBlocked);

          const endTime = performance.now();
          const time = (endTime - startTime).toFixed(2);

          document.getElementById('stat-time').textContent = `${time}ms`;

          if (this.solution) {
            this.showMessage(
              `âœ… Ã‡Ã¶zÃ¼m bulundu! (${time}ms)`,
              'success'
            );
            this.highlightSolution();
          } else {
            this.showMessage('âŒ Bu durumda Ã§Ã¶zÃ¼m yok!', 'error');
          }
        }

        highlightSolution() {
          this.solution.forEach((pos, index) => {
            const cell = this.board[pos.cellIndex];
            const key = `${pos.row},${pos.col}`;

            // Check if this position already has a queen
            if (this.queens.has(key)) {
              // Existing queen - use gold/yellow color
              cell.classList.add('solution-existing');
              cell.dataset.step = index + 1;
            } else {
              // New solution position - use green color
              cell.classList.add('solution');
              cell.dataset.step = index + 1;
            }
          });
        }

        async solveStepByStep() {
          this.solve();

          if (!this.solution) return;

          this.clearSolution();
          this.stepIndex = 0;

          this.showMessage('ðŸš¶ AdÄ±m adÄ±m Ã§Ã¶zÃ¼m baÅŸlÄ±yor...', 'info');

          this.stepInterval = setInterval(() => {
            if (this.stepIndex >= this.solution.length) {
              clearInterval(this.stepInterval);
              this.showMessage('âœ… TamamlandÄ±!', 'success');
              return;
            }

            const pos = this.solution[this.stepIndex];
            const cell = this.board[pos.cellIndex];
            const key = `${pos.row},${pos.col}`;

            // Check if this position already has a queen
            if (this.queens.has(key)) {
              // Existing queen - use gold/yellow color
              cell.classList.add('solution-existing');
              cell.dataset.step = this.stepIndex + 1;
            } else {
              // New solution position - use green color
              cell.classList.add('solution');
              cell.dataset.step = this.stepIndex + 1;
            }

            this.stepIndex++;
          }, 500);
        }

        addRandomBlocks() {
          this.reset();

          const count = Math.floor(this.size * 0.3);

          for (let i = 0; i < count; i++) {
            const index = Math.floor(Math.random() * (this.size * this.size));
            const key = `${Math.floor(index / this.size)},${index % this.size}`;

            this.blockedCells.add(key);
            this.board[index].classList.add('blocked');
          }

          this.updateStats();
          this.showMessage(`ðŸŽ² ${count} rastgele engel eklendi`, 'info');
        }

        clearSolution() {
          if (this.stepInterval) {
            clearInterval(this.stepInterval);
          }

          this.board.forEach((cell) => {
            cell.classList.remove('solution');
            cell.classList.remove('solution-existing');
            delete cell.dataset.step;
          });

          this.solution = null;
          document.getElementById('stat-time').textContent = '-';
        }

        reset() {
          this.clearSolution();

          this.queens.clear();
          this.blockedCells.clear();

          this.board.forEach((cell) => {
            cell.className = 'cell';
            cell.textContent = '';
            delete cell.dataset.step;
          });

          this.updateStats();
          this.showMessage('ðŸ”„ Tahta sÄ±fÄ±rlandÄ±', 'info');
        }

        changeSize(newSize) {
          this.size = newSize;
          this.queens.clear();
          this.blockedCells.clear();
          this.solution = null;

          this.createBoard();
          this.updateStats();

          document.getElementById('stat-size').textContent = `${this.size}x${this.size}`;
          this.showMessage(`ðŸ“ Tahta boyutu ${this.size}x${this.size} olarak deÄŸiÅŸtirildi`, 'info');
        }

        updateStats() {
          document.getElementById('stat-queens').textContent = this.queens.size;
          document.getElementById('stat-blocked').textContent =
            this.blockedCells.size;
        }

        showMessage(text, type = 'info') {
          const messageEl = document.getElementById('message');
          messageEl.textContent = text;
          messageEl.className = `message ${type}`;

          setTimeout(() => {
            messageEl.textContent = '';
            messageEl.className = 'message';
          }, 3000);
        }

        attachEventListeners() {
          document.getElementById('solve-btn').addEventListener('click', () => {
            this.solve();
          });

          document.getElementById('step-btn').addEventListener('click', () => {
            this.solveStepByStep();
          });

          document.getElementById('random-btn').addEventListener('click', () => {
            this.addRandomBlocks();
          });

          document.getElementById('reset-btn').addEventListener('click', () => {
            this.reset();
          });

          document.querySelectorAll('.size-btn').forEach((btn) => {
            btn.addEventListener('click', () => {
              document
                .querySelectorAll('.size-btn')
                .forEach((b) => b.classList.remove('active'));
              btn.classList.add('active');

              const size = parseInt(btn.dataset.size);
              this.changeSize(size);
            });
          });
        }
      }

      // Initialize demo
      const demo = new QueensDemo();

      console.log('ðŸŽ¯ Queens Solver Demo loaded!');
    </script>
  </body>
</html>
